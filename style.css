:root{--pink-1:#fff4f6;--pink-2:#ffe8ef;--accent:#d6284a;--soft:#fff;--gold:#f2d398}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--accent);background:linear-gradient(180deg,var(--pink-1),var(--pink-2));height:100vh;overflow:hidden;display:flex;align-items:center;justify-content:center}
#app{position:relative;width:100%;height:100%}
.scene{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column}
.hidden{display:none}

/* Scene 1: Balloons */
#balloon-layer{position:absolute;inset:0;pointer-events:none}
.balloon{position:absolute;width:56px;height:72px;border-radius:40px;background:linear-gradient(180deg,#ff9aa2,#ff4e50);box-shadow:0 12px 40px rgba(0,0,0,0.12);transform-origin:center bottom}
.balloon.heart{width:68px;height:68px;border-radius:14px;transform:rotate(45deg);background:linear-gradient(180deg,#ff6b81,#ff2d55)}
@keyframes rise{from{transform:translateY(0)}to{transform:translateY(-140vh)}}

/* Scene 2: Mail */
#envelope{width:220px;height:150px;position:relative;cursor:pointer;z-index:5;display:flex;align-items:center;justify-content:center}
.env-back{position:absolute;inset:0;border-radius:12px;background:linear-gradient(180deg,var(--soft),#fff6f8);box-shadow:0 20px 50px rgba(0,0,0,0.15)}
.env-front{position:absolute;inset:6px;border-radius:10px;background:linear-gradient(180deg,#fff,#fffafc);clip-path:polygon(0 0,100% 0,100% 50%,50% 78%,0 50%);display:flex;align-items:flex-start;justify-content:center;padding-top:12px}
.heart-seal{width:48px;height:48px;border-radius:50%;background:linear-gradient(180deg,#ff4e50,#d91d4c);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:0 10px 30px rgba(217,29,76,0.18)}
#mail-text{margin-top:18px;color:#8b1830;font-weight:600}
.envelope-open .env-front{transform-origin:center top;animation:openEnv .7s forwards}
@keyframes openEnv{0%{transform:translateY(0)}100%{transform:translateY(-84px) rotateX(8deg)}}

/* Improved envelope/button styling + shake animation */
#envelope{transition:transform .18s ease, box-shadow .18s ease}
#envelope:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 30px 70px rgba(214,40,74,0.12)}
.heart-seal{transition:transform .18s ease}

/* small attention-grabbing shake */
.shake{animation:shakeX 820ms cubic-bezier(.36,.07,.19,.97) both}
@keyframes shakeX{
	0%{transform:translateX(0)}
	10%{transform:translateX(-8px) rotate(-2deg)}
	20%{transform:translateX(8px) rotate(2deg)}
	30%{transform:translateX(-6px) rotate(-1.5deg)}
	40%{transform:translateX(6px) rotate(1.5deg)}
	50%{transform:translateX(-4px) rotate(-0.8deg)}
	60%{transform:translateX(4px) rotate(0.8deg)}
	70%{transform:translateX(-2px)}
	80%{transform:translateX(2px)}
	100%{transform:translateX(0)}
}

/* gentle pulsing hint when present */
.pulse-hint{animation:hintPulse 2.6s infinite}
@keyframes hintPulse{0%{transform:translateY(0) scale(1);opacity:1}50%{transform:translateY(-4px) scale(1.01);opacity:0.98}100%{transform:translateY(0) scale(1);opacity:1}}

/* Scene 3: Photos */
#photo-stage{width:340px;height:240px;display:flex;align-items:center;justify-content:center;position:relative}
.photo-frame{position:absolute;width:300px;height:200px;border-radius:14px;overflow:hidden;background:#fff;box-shadow:0 20px 50px rgba(0,0,0,0.14);opacity:0;transform:scale(.98);display:flex;align-items:center;justify-content:center}
.photo-frame img{width:100%;height:100%;object-fit:cover}
.from-left{animation:leftIn .8s forwards}
.from-right{animation:rightIn .8s forwards}
.from-top{animation:topIn .8s forwards}
.from-bottom{animation:bottomIn .8s forwards}
@keyframes leftIn{0%{opacity:0;transform:translateX(-120%) scale(.98)}100%{opacity:1;transform:translateX(0) scale(1)}}
@keyframes rightIn{0%{opacity:0;transform:translateX(120%) scale(.98)}100%{opacity:1;transform:translateX(0) scale(1)}}
@keyframes topIn{0%{opacity:0;transform:translateY(-120%) scale(.98)}100%{opacity:1;transform:translateY(0) scale(1)}}
@keyframes bottomIn{0%{opacity:0;transform:translateY(120%) scale(.98)}100%{opacity:1;transform:translateY(0) scale(1)}}
@keyframes fadeOut{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.98)}}

/* Scene 4: Continue Button */
#continueBtn{background:linear-gradient(90deg,#ff6b8a,#ff3b6b);color:#fff;padding:14px 22px;border-radius:12px;border:none;font-size:18px;cursor:pointer;box-shadow:0 18px 50px rgba(255,75,120,0.18);animation:pulse 2s infinite}
@keyframes pulse{0%{box-shadow:0 8px 30px rgba(255,75,120,0.12)}50%{box-shadow:0 20px 60px rgba(255,75,120,0.22)}100%{box-shadow:0 8px 30px rgba(255,75,120,0.12)}}

/* Scene 5: Letter */
#overlay{position:fixed;inset:0;background:rgba(0,0,0,0.28);z-index:40}
#letter-card{position:relative;z-index:50;background:#fff;padding:24px;border-radius:12px;max-width:760px;width:88%;box-shadow:0 30px 80px rgba(0,0,0,0.25)}
#letter-content{min-height:160px;color:#8b1830;font-size:20px;line-height:1.45;position:relative}
.typewriter{white-space:pre-wrap;font-family:Georgia,'Times New Roman',serif}
.sparkle{position:absolute;width:6px;height:6px;border-radius:50%;background:radial-gradient(circle,#fff,rgba(255,255,255,0.7));box-shadow:0 0 10px rgba(255,255,255,0.8)}

/* Ambient hearts (low impact) */
#floating-hearts{position:absolute;inset:0;pointer-events:none}
.ambient-heart{position:absolute;font-size:20px;opacity:0.95;transform:translateY(0);pointer-events:none}
/* looped floating hearts animation using CSS variables for duration, delay and sway */
.ambient-heart{
	animation: floatUp var(--dur,10000ms) linear var(--delay,0ms) infinite;
}
@keyframes floatUp{
	0%{transform:translateY(0) translateX(0);opacity:1}
	50%{transform:translateY(-50vh) translateX(var(--sway,12px));opacity:0.8}
	100%{transform:translateY(-120vh) translateX(calc(var(--sway,12px) * -1));opacity:0.06}
}

@media(max-width:520px){#envelope{width:180px;height:120px}#photo-stage{width:260px;height:180px}.photo-frame{width:220px;height:160px}#letter-card{padding:16px;font-size:16px}}

/* Audio controls removed */